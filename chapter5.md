## Chapter5: Database

思考：

-  底层实现读写update and delete 操作
- 上层对这个操作进行进一步封装
- db也有很多类，功能各不相同，但是核心还是对数据的管理sql and nosql


### 1:SQL数据库
关系型数据库，用表存储数据，有header必须，primary key为行数。表的最大特点是行数可变，列的数量是不变的。表中有一列特殊的列:primary key。primary key的特点是唯一性。表中还有一种列称为外键，外键通常代表其它表中某行的主键。表的主键和外键造就了表与表之间的关系，所以这种数据库通常称为关系型数据库。表的这一特点就会带来问题，如果数据量很大，后期表的列数要发生变化，就需要重新设计表，生成新的空表，然后写代码把旧表的数据迁移到新表中，通常称为数据库的迁移。


![](/assets/role.jpg)
users表中的role_id为这个表中的外键，指向另一个表roles中的主键id。外键的好处是可以很容易的应对一些变化，如角色名要更新，则只需要更新一下roles表中的name即可。关系表把一个表的数据变成两个或多个表两存，所以在读取用户信息时，要读取两个表，再将从这两个表中读到的数据联结起来。由于联结是经常要用到的功能，所以关系型的数据库通常会实现一些常用的多表数据联结操作。
### 2：NoSQL数据库（非关系型数据库）
NoSQL的特点是使用**集合**代替表，使用**文档**代替记录。NoSQL底层一般不支持多表联结操作，所以如果是多表查询，就要查两次。所以NoSQL通常要设计成一个表，这样查表容易了，但是增加了数据的重复量，占用了更多的磁盘空间。

